### 什么是过滤器?
#### 过滤器可以在业务云函数执行之前（或之后），统一拦截，进行过滤后再放行。
##### 示例代码在目录`router/middleware/modules/` 下
### 我用自定义过滤器可以做什么?
##### 自定义过滤器使用场景1 - 电商多店店铺管理系统后台
```
 1、使用自定义过滤器拦截当前登录用户
 2、检查该用户是否有权限操作该店铺
 3、如有权限，则同时将店铺信息直接回传给业务云函数
 4、在业务云函数的内置变量 `filterResponse` 中可直接获得当前操作的店铺的信息
```

 ```
自定义过滤器支持正则匹配请求路径。
自定义过滤器支持层级 越小越先执行
 ```
#### 框架内置以下过滤器：(无需配置，已自动生效，编写同ID的过滤器可以覆盖内置过滤器）
| 过滤器ID | 正则规则 |   层级   |     说明     |
|---------|----------|-------- |---------------------------|
|   pub   | /pub/    |   100   |  所有人都可以访问，不进行过滤    |
|   kh    | /kh/     |   200   |  用户token过滤器，检测用户是否已登录  |
|   sys   | /sys/    |   300   |  云函数层的权限过滤器，检测用户是否有此业务云函数的执行权限  |

### 如何在业务函数获得过滤器传给业务函数的数据？

```js

'use strict';
module.exports = {
  main: async(event) = >{
    // filterResponse 为过滤器传给业务函数的数据
    let { filterResponse } = event;
    /**
     * 自定义过滤器检测了用户token已通过
     * 且通过用户token获得了用户信息和用户当前登录的店铺信息,并传给业务函数
     */
    let res = {
      code: 0,
      msg: ''，
      shopInfo : filterResponse.shopInfo,
      userInfo : filterResponse.userInfo 
    };

   
    return res;
  }
}
```
